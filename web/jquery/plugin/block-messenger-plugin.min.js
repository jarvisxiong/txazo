(function(c){var b={defaults:{css:{width:"400px",border:"2px solid #CCC"},overlayCSS:{opacity:".5"}},openBlock:function(e,f,d){c.blockUI(c.extend({},this.defaults,e));f&&d&&setTimeout(function(){d()},f)},closeBlock:function(d){c.unblockUI();d&&d()}};var a={Type:{Tip:1,Alert:2,Confirm:3,Prompt:4},Content:{dialog_text:'<div class="dialog_text" style="margin: 20px 0 0 0; text-align: center; font-size: 16px; font-weight: 500;">',dialog_input:'<div class="dialog_input" style="margin: 20px 0 0 0; text-align: center; padding-left: 20px; padding-right: 20px;"><input type="text" class="form-control" /></div>',dialog_button:'<div class="dialog_button" style="margin: 20px 0; text-align: center;">',dialog_div_suffix:"</div>",dialog_button_ok:'<button type="button" class="btn btn-success btn-ok" style="padding-left:30px; padding-right:30px;">',dialog_button_cancel:'<button type="button" class="btn btn-danger btn-cancel" style="margin-left:50px; padding-left:30px; padding-right:30px;">',dialog_button_hidden:'<button type="button" class="btn-hidden"></button>',dialog_button_suffix:"</button>"},buildDialog:function(e,d){if(e==a.Type.Tip){return this.buildText(d).replace("margin: 20px 0 0 0","margin: 15px 0")}else{if(e==a.Type.Alert){return this.buildText(d)+this.buildButton(d,{hidden:true,ok:true})}else{if(e==a.Type.Confirm){return this.buildText(d)+this.buildButton(d,{hidden:true,ok:true,cancel:true})}else{if(e==a.Type.Prompt){return this.buildText(d)+this.buildInput()+this.buildButton(d,{hidden:true,ok:true,cancel:true})}}}}},buildText:function(d){return this.Content.dialog_text+d.text+this.Content.dialog_div_suffix},buildInput:function(){return this.Content.dialog_input},buildButton:function(d,f){var e=this.Content.dialog_button;if(f.hidden){e+=this.buildButtonHidden(d)}if(f.ok){e+=this.buildButtonOk(d)}if(f.cancel){e+=this.buildButtonCancel(d)}return e+this.Content.dialog_div_suffix},buildButtonOk:function(d){return this.Content.dialog_button_ok+d.ok+this.Content.dialog_button_suffix},buildButtonCancel:function(d){return this.Content.dialog_button_cancel+d.cancel+this.Content.dialog_button_suffix},buildButtonHidden:function(d){return this.Content.dialog_button_hidden}};c.extend({blockTip:function(d){var e={text:"提示"};c.extend(e,d);b.openBlock({message:a.buildDialog(a.Type.Tip,e),onOverlayClick:function(){b.closeBlock()}},e.timeout,b.closeBlock)},blockAlert:function(d){var f={text:"提示",ok:"Ok",Ok:function(){}};c.extend(f,d);var e=c(a.buildDialog(a.Type.Alert,f)).delegate(".btn-ok","click",function(){b.closeBlock(function(){f.Ok()})});b.openBlock({message:e});setTimeout(function(){e.find(".btn-hidden").remove()},10)},blockConfirm:function(d){var f={text:"提示",ok:"Ok",cancel:"Cancel",Ok:function(){},Cancel:function(){}};c.extend(f,d);var e=c(a.buildDialog(a.Type.Confirm,f)).delegate(".btn-ok","click",function(){b.closeBlock(function(){f.Ok()})}).delegate(".btn-cancel","click",function(){b.closeBlock(function(){f.Cancel()})});b.openBlock({message:e});setTimeout(function(){e.find(".btn-hidden").remove()},10)},blockPrompt:function(d){var f={text:"提示",ok:"Ok",cancel:"Cancel",Ok:function(){},Cancel:function(){}};c.extend(f,d);var e=c(a.buildDialog(a.Type.Prompt,f)).delegate(".btn-ok","click",function(){var h=e.find("input");var g=h.val();if(g==null||g.trim()==""){h.focus().closest(".dialog_input").addClass("has-error");return}b.closeBlock(function(){f.Ok(g)})}).delegate(".btn-cancel","click",function(){b.closeBlock(function(){f.Cancel()})});b.openBlock({message:e});setTimeout(function(){e.find(".btn-hidden").remove()},10)},blockAjax:function(d){var e={text:"正在处理中"};b.openBlock({message:e.text});var f=c.extend({},d);if(d.success){d.success=function(){b.closeBlock();f.success()}}if(d.error){d.error=function(){b.closeBlock();f.error()}}c.ajax(d)},blockFormSubmit:function(d){var e={text:"表单提交中"};c.extend(e,d);c("#"+e.form).submit(function(f){f.preventDefault();if(!e.beforeSubmit()){return}c(this).submit();b.openBlock({message:e.text})})}})})(jQuery);